{% extends 'base.html.twig' %}

{% block title %}EcoWeb | Découvrez nos formations{% endblock %}

{% block body %}
    <section class="row my-5">
        <h1 class="text-space-mono-bold text-secondary">Formations</h1>
    </section>

    <section>
        {{ form_start(search) }}
        {{ form_end(search) }}
    </section>

    {% if is_granted('ROLE_LEARNER') %}
        <section class="mt-3">
            <div class="btn-group" role="group" aria-label="Filters">
                <input type="radio" class="btn-check button-check-primary" name="progress-filter" id="all" autocomplete="off" value="all">
                <label for="all" class="mx-2">Toutes</label>

                <input type="radio" class="btn-check button-check-primary" name="progress-filter" id="currently" autocomplete="off" value="current">
                <label for="currently" class="mx-2">En cours</label>

                <input type="radio" class="btn-check button-check-primary mx-2" name="progress-filter" id="done" autocomplete="off" value="done">
                <label for="done" class="mx-2">Terminées</label>
            </div>
        </section>
    {% endif %}

    <section class="row my-5" id="formations">
        {% for formation in formations %}
            <div class="col-12 col-sm-6 col-md-4">
                <div class="bg-dark text-white rounded-corners p-4 m-2">
                    <img src="{{ formation.image }}" class="w-100">
                    <h2 class="text-space-mono text-light mt-4">
                        {{ formation.title }}
                    </h2>
                    <p>
                        {{ formation.description }}
                    </p>
                    {% if formation.progress is defined %}
                        <div class="text-secondary mb-3">
                            <p>Votre progression : </p>
                            <div class="progress">
                                <div
                                        class="progress-bar bg-secondary"
                                        role="progressbar"
                                        style="width: {{ formation.progress }}%;"
                                        aria-valuenow="{{ formation.progress }}"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                >
                                    {{ formation.progress }}%
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    <div class="text-center">
                        <a
                        class="button-primary"
                        href="{{ path('app_formation_view', {"formation": formation.id}) }}">
                            Accéder à la formation
                        </a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </section>

    <div id="Hidden-Elements" style="display: none">
        <div class="progress-bar bg-secondary" role="progressbar" style="width: 50%"
             aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
{% endblock %}
